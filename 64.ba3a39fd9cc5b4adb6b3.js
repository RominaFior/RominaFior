(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{X3zk:function(o,r,i){"use strict";i.r(r),i.d(r,"LoginPageModule",function(){return m});var e=i("ofXK"),t=i("3Pt+"),n=i("TEn/"),s=i("tyNb"),l=i("mrSG"),a=i("fXoL"),c=i("lGQG");function b(o,r){1&o&&(a.Ob(0,"span",15),a.kc(1," Email is required. "),a.Nb())}function u(o,r){1&o&&(a.Ob(0,"span",15),a.kc(1," Please provide valid email id. "),a.Nb())}function d(o,r){1&o&&(a.Ob(0,"span",15),a.kc(1," Password is required. "),a.Nb())}function p(o,r){1&o&&(a.Ob(0,"span",16),a.kc(1," Unauthorized User "),a.Nb())}const g=[{path:"",component:(()=>{class o{constructor(o,r,i){this.authSvc=o,this.router=r,this.formBuilder=i,this.isSubmitted=!1,this.unauthorized=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[t.l.required,t.l.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],password:["",t.l.required]})}get errorControl(){return this.loginForm.controls}submitForm(){return Object(l.a)(this,void 0,void 0,function*(){if(this.isSubmitted=!0,!this.loginForm.valid)return console.log("Please provide all the required values!"),!1;try{const o=yield this.authSvc.login(this.loginForm.get("email").value,this.loginForm.get("password").value);o&&(console.log(o,"desde login"),this.redirectUser())}catch(o){console.log(o)}})}onLoginGoogle(){return Object(l.a)(this,void 0,void 0,function*(){try{(yield this.authSvc.loginGoogle())&&this.redirectUser()}catch(o){console.log(o)}})}redirectUser(){this.subscription=this.authSvc.user$.subscribe(o=>{this.userInfo=o,this.userInfo&&(this.authSvc.isEmailVerified(this.userInfo)?"user"===this.userInfo.role?this.router.navigate(["home"]):"admin"!==this.userInfo.role&&"kitchen"!==this.userInfo.role||(this.authSvc.logout(),this.unauthorized=!0,setTimeout(()=>{this.unauthorized=!1,this.isSubmitted=!1,this.loginForm.reset()},3e3)):(console.log("entra en login verify"),this.router.navigate(["verify-email"])))})}ngOnDestroy(){this.loginForm.reset(),this.subscription&&this.subscription.unsubscribe()}}return o.\u0275fac=function(r){return new(r||o)(a.Lb(c.a),a.Lb(s.g),a.Lb(t.a))},o.\u0275cmp=a.Fb({type:o,selectors:[["app-login"]],decls:43,vars:5,consts:[["novalidate","",3,"formGroup","ngSubmit"],["lines","full"],["position","floating"],["color","danger"],["formControlName","email","type","email","required",""],["class","error ion-padding",4,"ngIf"],["formControlName","password","type","password","required",""],["class","error",4,"ngIf"],["color","primary","type","submit","expand","block"],[1,"ion-text-end"],["routerLink","/forgot-password"],[1,"center-span"],["type","submit","expand","block","color","danger",3,"click"],["routerLink","/register"],["routerLink","/login-staff"],[1,"error","ion-padding"],[1,"error"]],template:function(o,r){1&o&&(a.Ob(0,"ion-header"),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-title"),a.kc(3,"Login"),a.Nb(),a.Nb(),a.Nb(),a.Ob(4,"ion-content"),a.Ob(5,"form",0),a.Wb("ngSubmit",function(){return r.submitForm()}),a.Ob(6,"ion-item",1),a.Ob(7,"ion-label",2),a.kc(8,"E-Mail "),a.Ob(9,"ion-text",3),a.kc(10,"*"),a.Nb(),a.Nb(),a.Mb(11,"ion-input",4),a.Nb(),a.jc(12,b,2,0,"span",5),a.jc(13,u,2,0,"span",5),a.Ob(14,"ion-item"),a.Ob(15,"ion-label",2),a.kc(16,"Password "),a.Ob(17,"ion-text",3),a.kc(18,"*"),a.Nb(),a.Nb(),a.Mb(19,"ion-input",6),a.Nb(),a.jc(20,d,2,0,"span",5),a.jc(21,p,2,0,"span",7),a.Ob(22,"ion-button",8),a.kc(23," Login "),a.Nb(),a.Ob(24,"ion-row"),a.Ob(25,"ion-col"),a.Ob(26,"p",9),a.Ob(27,"a",10),a.kc(28,"Forgot password?"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(29,"span",11),a.kc(30,"or"),a.Nb(),a.Ob(31,"ion-button",12),a.Wb("click",function(){return r.onLoginGoogle()}),a.kc(32," Login with Google "),a.Nb(),a.Nb(),a.Ob(33,"ion-row"),a.Ob(34,"ion-col"),a.Ob(35,"p",9),a.Ob(36,"a",13),a.kc(37,"Create an account"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(38,"ion-row"),a.Ob(39,"ion-col"),a.Ob(40,"p",9),a.Ob(41,"a",14),a.kc(42,"Staff access"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&o&&(a.Bb(5),a.dc("formGroup",r.loginForm),a.Bb(7),a.dc("ngIf",r.isSubmitted&&(null==r.errorControl.email.errors?null:r.errorControl.email.errors.required)),a.Bb(1),a.dc("ngIf",r.isSubmitted&&(null==r.errorControl.email.errors?null:r.errorControl.email.errors.pattern)),a.Bb(7),a.dc("ngIf",r.isSubmitted&&(null==r.errorControl.password.errors?null:r.errorControl.password.errors.required)),a.Bb(1),a.dc("ngIf",r.unauthorized))},directives:[n.e,n.o,n.n,n.d,t.m,t.h,t.c,n.g,n.h,n.m,n.f,n.t,t.g,t.b,t.k,e.i,n.b,n.j,n.c,s.i,n.r],styles:[".center-span[_ngcontent-%COMP%]{display:block;text-align:center}.error[_ngcontent-%COMP%]{font-size:small;color:red}"]}),o})()}];let h=(()=>{class o{}return o.\u0275mod=a.Jb({type:o}),o.\u0275inj=a.Ib({factory:function(r){return new(r||o)},imports:[[s.j.forChild(g)],s.j]}),o})(),m=(()=>{class o{}return o.\u0275mod=a.Jb({type:o}),o.\u0275inj=a.Ib({factory:function(r){return new(r||o)},imports:[[e.c,t.j,t.d,n.p,h]]}),o})()}}]);